# Points in radius
В этом репозитории находится код для тестирования различных способов получения точек в радиусе с помощью БД MySQL 8

## Подключение
Репозиторий оформлен как composer пакет, так что для подключения достаточно сделать следующее:
Добавить репозиторий в composer.json
```
"repositories": [
      {
          "type": "vcs",
          "url": "git@github.com:StepanRodionov/points-in-radius.git"
      }
  ]
```
Выполнить команду ```composer require stepanrodionov/points-in-radius```

## Разворачивание
В папке assets лежит python файл generate.py, параметры подключения к БД и количество точек необходимо настроить в находящемся там же settings.py. Для вызова кода получения точек и визуализации данных в той же папке есть 2 файла с расширением .php - там тоже надо настроить подключение к БД, а также API ключ для показа яндекс карт.


## Использование
В данный момент есть 3 метода для получения точек:
- MercatorCoordinates
- HaversineCoordinates
- GeometryCoordinates

Каждый из них реализует свой способ выборки точек в методе getCustomWhere, а также предвыборку для сокращения времени работы основного алгоритма (getSqlSquareWhere). Можно добавлять колонки в выборку с помощью метода getCustomSelect.
Каждый из этих методов требует инстанса PDO для работы с БД в конструкторе.
Подробно работа с этими методами описана в статье https://rodionoff.space/all/points-in-radius/. Классы/методы/фрагменты кода можно использовать в своих проектах без каких-либо ограничений.
